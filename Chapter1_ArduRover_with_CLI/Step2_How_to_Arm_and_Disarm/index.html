<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Step2 How to Arm and Disarm - MAVROS Tutorial</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Step2 How to Arm and Disarm";
    var mkdocs_page_input_path = "Chapter1_ArduRover_with_CLI/Step2_How_to_Arm_and_Disarm.md";
    var mkdocs_page_url = "/Chapter1_ArduRover_with_CLI/Step2_How_to_Arm_and_Disarm/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> MAVROS Tutorial</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../about/">About</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Chapter1 ArduRover with CLI</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../Step1_How_to_change_mode/">Step1 How to change mode</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Step2 How to Arm and Disarm</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#how-to-arm-and-disarm-ardupilot-sitl-rover">How to Arm and Disarm Ardupilot-SITL Rover</a></li>
    

    <li class="toctree-l3"><a href="#initialize">Initialize</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#arm-and-disarm">Arm and Disarm</a></li>
        
            <li><a class="toctree-l4" href="#arm-and-disarm-using-mavproxy-or-ardupilot-sitl">Arm and Disarm using MAVProxy or Ardupilot-SITL</a></li>
        
            <li><a class="toctree-l4" href="#arm-and-disarm-using-ros-rqt">Arm and Disarm using ROS rqt</a></li>
        
            <li><a class="toctree-l4" href="#arm-and-disarm-using-ros-commands-lines">Arm and Disarm using ROS commands lines</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../Step3_How_to_make_move/">Step3 How to make move</a>
                </li>
                <li class="">
                    
    <a class="" href="../Step4_How_to_set_and_get_parameters/">Step4 How to set and get parameters</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Chapter2 ArduRover with Python</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../Chapter2_ArduRover_with_Python/Step1_Drive_rover/">Step1 Drive rover</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Chapter2_ArduRover_with_Python/Step2_Detials/">Step2 Detials</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Chapter2_ArduRover_with_Python/Step3_How_to_use/">Step3 How to use</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Chapter3 ArduRover with C++</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../Chapter3_ArduRover_with_C++/Step1_Drive_rover/">Step1 Drive rover</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Chapter3_ArduRover_with_C++/Step2_Details/">Step2 Details</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Chapter3_ArduRover_with_C++/Step3_How_to_use/">Step3 How to use</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">MAVROS Tutorial</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Chapter1 ArduRover with CLI &raquo;</li>
        
      
    
    <li>Step2 How to Arm and Disarm</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="how-to-arm-and-disarm-ardupilot-sitl-rover">How to Arm and Disarm Ardupilot-SITL Rover</h1>
<p><em>Author:</em> Masoud Iranmehr</p>
<p><em>Github Page:</em> <a href="https://github.com/masoudir/mavros_tutorial">github.com/masoudir/mavros_tutorial</a></p>
<h1 id="initialize">Initialize</h1>
<p>Please follow steps mentioned in this <a href="../..">link</a></p>
<h2 id="arm-and-disarm">Arm and Disarm</h2>
<h2 id="arm-and-disarm-using-mavproxy-or-ardupilot-sitl">Arm and Disarm using MAVProxy or Ardupilot-SITL</h2>
<p>You can send your commands directly from your terminal provided by MAVProxy or SITL. For this just type this command:</p>
<ul>
<li>
<p><code>arm throttle</code> - Arms the robot</p>
</li>
<li>
<p><code>disarm</code> - Disarms the robot</p>
</li>
</ul>
<h2 id="arm-and-disarm-using-ros-rqt">Arm and Disarm using ROS rqt</h2>
<p>At first you need to add two plugin from rqt:</p>
<pre><code>Plugins -&gt; Topics -&gt; Topic Monitor
Plugins -&gt; Services -&gt; Service Caller
</code></pre>
<p>Then in "Topic Monitor" side, you have to tick the topic of "/mavros/state" to view its contents, so that you can get 
the vehicle mode and also some other parameters such as "arm status" and "Guided status".</p>
<p>Then in "Service Caller" side, you have to select "/mavros/cmd/arming" and then in the field of "value", you can set
your arm status as a bool type variable (False/ True).  Then click on "call" button to send this message. The result should be as follow:</p>
<p><img alt="Screenshot" src="../../img/ch1_rqt_arm.jpg" /></p>
<h2 id="arm-and-disarm-using-ros-commands-lines">Arm and Disarm using ROS commands lines</h2>
<h3 id="monitoring-rover-general-status-arm-status-and-mode-name">Monitoring Rover general status (Arm status and Mode name)</h3>
<p>If you want to view the general status of your ardupilot robot in MAVROS, you have to know all the topics created by MAVROS:</p>
<ul>
<li><code>rostopic list</code> - Returns all topics available</li>
</ul>
<p>Then you can see that every part of your robot has been mapped to a specific topic. In order to show robot arming status, you must use "/mavros/state" topic:</p>
<ul>
<li><code>rostopic echo /mavros/state</code> - Returns all contents of /mavros/state topic periodically</li>
</ul>
<p>The results should be as similar as this:</p>
<pre><code>---                                                                                                                                                                    
header:                                                                                                                                                                
  stamp: 09                                                                                                                                                            
    secs: 1595198641

    nsecs: 651358095                                                                                                                                                   
  frame_id: ''                                                                                                                                                         
connected: True                                                                                                                                                        
guided: False                                                                                                                                                          
manual_input: True

mode: "MANUAL"                                                                                                                                                         
system_status: 4                                                                                                                                                       
---
</code></pre>
<p>The command "rostopic echo <TOPIC_NAME>" will return all the contents of the topic every one second. In this case, 
"connected" field shows you that your MAVROS is still connected to the robot. Also "mode" shows you the name of vehicle 
mode at that time.</p>
<h3 id="send-armdisarm-command-to-robot">Send Arm/Disarm command to robot</h3>
<p>Just follow these commands:</p>
<ul>
<li>
<p><code>rosservice call /mavros/cmd/arming True</code> - Send Arm command to robot</p>
</li>
<li>
<p><code>rosservice call /mavros/cmd/arming False</code> - Send Disarm command to robot</p>
</li>
</ul>
<p>Another method is to use "rosrun" command:</p>
<ul>
<li>
<p><code>rosrun mavros mavsafety arm</code> - Send Arm command to robot</p>
</li>
<li>
<p><code>rosrun mavros mavsafety disarm</code> - Send Disarm command to robot</p>
</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../Step3_How_to_make_move/" class="btn btn-neutral float-right" title="Step3 How to make move">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../Step1_How_to_change_mode/" class="btn btn-neutral" title="Step1 How to change mode"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../Step1_How_to_change_mode/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../Step3_How_to_make_move/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../../js/theme.js"></script>

</body>
</html>
